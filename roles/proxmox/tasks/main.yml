---
# file: roles/proxmox/tasks/main.yml
- name: This is the role proxmox gamin
  ansible.builtin.ping:
    data: test
- name: Import debian version of install pip
  ansible.builtin.import_tasks: debian.yml
  when: ansible_facts['os_family']|lower == 'debian'
- name: Make sure base system container template is present
  community.general.proxmox_template:
    node: pve01
    api_user: root@pam
    api_password: "{{ ansible_password }}"
    api_host: pve01
    storage: local
    content_type: vztmpl
    template: debian-12-standard_12.2-1_amd64.tar.zst
    state: present
- name: Create new container with minimal options
  community.general.proxmox:
    vmid: 100 # Specifies the instance ID. If not set the next available ID will be fetched from ProxmoxAPI.
    node: pve01 # the physical server on which the container will run
    api_user: root@pam
    api_password: "{{ ansible_password }}"
    api_host: pve01 # Specify the target host of the Proxmox VE cluster.
    password: enter # the instance root password
    storage: local-lvm # Hidden required field
    hostname: plex01.local # the instance hostname
    ostemplate: 'local:vztmpl/debian-12-standard_12.2-1_amd64.tar.zst'
